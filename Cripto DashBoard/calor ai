<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cripto DashBoard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Cripto DashBoard</h1>
        <button id="btnAtualizar">Atualizar</button>
        <input type="text" id="filter" placeholder="Filtrar Moeda...">
        <div id="listaMoedas"></div>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>






// pagina main.js


import { buscarPreco, Moedas } from "./serverAPI.js";

let listaMoedas = document.querySelector("#listaMoedas")
document.querySelector("#btnAtualizar").addEventListener("click", atualizar);
document.querySelector("#filter").addEventListener("input", (e) => {
    const termo = e.target.value.toLowerCase();
    const filtradas = moedas.filter(({ nome }) => nome.includes(termo));
    rederizar(filtradas);
});



let moedas = []


function rederizar(dados) {
    listaMoedas.innerHTML = dados.map(({ nome, preco }) => `
   <div>
        <h3>${nome}</h3>
        <p id = "listaMoeda">${preco}</p>

   </div>`).join('')


}
async function atualizar() {
    try {
        const dados = await buscarPreco()

        moedas = [
            { nome: 'bitcoin', preco: dados.bitcoin.brl },
            { nome: 'ethereum', preco: dados.ethereum.brl },
            { nome: 'cardano', preco: dados.cardano.brl },
            { nome: 'dogecoin', preco: dados.dogecoin.brl },
            { nome: 'litecoin', preco: dados.litecoin.brl }
        ]
        rederizar(moedas)

    } catch (err) {
        console.log('deu ruim na atualização')
    }

}
